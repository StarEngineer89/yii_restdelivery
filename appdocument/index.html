<!doctype html>  
<!--[if IE 6 ]><html lang="en-us" class="ie6"> <![endif]-->
<!--[if IE 7 ]><html lang="en-us" class="ie7"> <![endif]-->
<!--[if IE 8 ]><html lang="en-us" class="ie8"> <![endif]-->
<!--[if (gt IE 7)|!(IE)]><!-->
<html lang="en-us"><!--<![endif]-->
<head>
	<meta charset="utf-8">
	
	<title>Karenderia Mobile App</title>
	
	<meta name="description" content="description">
	<meta name="author" content="basti">
	<meta name="copyright" content="basti">
	<meta name="generator" content="Documenter v2.0 http://rxa.li/documenter">
	<meta name="date" content="2015-10-20T03:41:07+02:00">
	
	<link rel="stylesheet" href="assets/css/documenter_style.css" media="all">
	
	
	
	<script src="assets/js/jquery.js"></script>
	
	<script src="assets/js/jquery.scrollTo.js"></script>
	<script src="assets/js/jquery.easing.js"></script>
	
	<script>document.createElement('section');var duration='500',easing='swing';</script>
	<script src="assets/js/script.js"></script>
	
	<style>
		html{background-color:#FFFFFF;color:#383838;}
		::-moz-selection{background:#444444;color:#DDDDDD;}
		::selection{background:#444444;color:#DDDDDD;}
		#documenter_sidebar #documenter_logo{background-image:url();}
		a{color:#0000FF;}
		.btn {
			border-radius:3px;
		}
		.btn-primary {
			  background-image: -moz-linear-gradient(top, #0088CC, #0044CC);
			  background-image: -ms-linear-gradient(top, #0088CC, #0044CC);
			  background-image: -webkit-gradient(linear, 0 0, 0 0088CC%, from(#DDDDDD), to(#0044CC));
			  background-image: -webkit-linear-gradient(top, #0088CC, #0044CC);
			  background-image: -o-linear-gradient(top, #0088CC, #0044CC);
			  background-image: linear-gradient(top, #0088CC, #0044CC);
			  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#0088CC', endColorstr='#0044CC', GradientType=0);
			  border-color: #0044CC #0044CC #bfbfbf;
			  color:#FFFFFF;
		}
		.btn-primary:hover,
		.btn-primary:active,
		.btn-primary.active,
		.btn-primary.disabled,
		.btn-primary[disabled] {
		  border-color: #0088CC #0088CC #bfbfbf;
		  background-color: #0044CC;
		}
		hr{border-top:1px solid #EBEBEB;border-bottom:1px solid #FFFFFF;}
		#documenter_sidebar, #documenter_sidebar ul a{background-color:#DDDDDD;color:#222222;}
		#documenter_sidebar ul a{-webkit-text-shadow:1px 1px 0px #EEEEEE;-moz-text-shadow:1px 1px 0px #EEEEEE;text-shadow:1px 1px 0px #EEEEEE;}
		#documenter_sidebar ul{border-top:1px solid #AAAAAA;}
		#documenter_sidebar ul a{border-top:1px solid #EEEEEE;border-bottom:1px solid #AAAAAA;color:#444444;}
		#documenter_sidebar ul a:hover{background:#444444;color:#DDDDDD;border-top:1px solid #444444;}
		#documenter_sidebar ul a.current{background:#444444;color:#DDDDDD;border-top:1px solid #444444;}
		#documenter_copyright{display:block !important;visibility:visible !important;}
	</style>
	
</head>
<body class="documenter-project-karenderia-mobile-app">
	<div id="documenter_sidebar">
		<a href="#documenter_cover" id="documenter_logo"></a>
		<ul id="documenter_nav">
			<li><a class="current" href="#documenter_cover">Start</a></li>
				
			<li><a href="#features" title="Features">Features</a></li>
			<li><a href="#live_demo" title="Live Demo">Live Demo</a></li>
			<li><a href="#installation" title="Installation">Installation</a></li>
			<li><a href="#phonegapbuild" title="Phonegap Build">Build your app using phonegap build</a></li>
			<li><a href="#googleproject" title="Google Android Project">How to create Google android Project</a></li>
			<li><a href="#facebooklogin" title="Facebook login">How to setup your facebook login</a></li>
			<li><a href="#paypal" title="Paypal">How to setup your paypal</a></li>
			<li><a href="#how_to_translate" title="How to translate the app">How to translate the app</a></li>
			<li><a href="#how_to_change_notification_tone" title="How to change notification tone">How to change notification tone</a></li>
			<!--<li><a href="#razor_pay" title="Update KMRS with Razorpay">Update KMRS with Razorpay payment</a></li>-->
			<li><a href="#frequently_asked_questions" title="Frequently Asked Questions">Frequently Asked Questions</a></li>
			<li><a href="#changelog" title="Changelog">Changelog</a></li>
			<li><a href="#sources_and_credits" title="Sources and Credits">Sources and Credits</a></li>
			<li><a href="#finally" title="Finally">Finally</a></li>

		</ul>
		<div id="documenter_copyright">Copyright bastikikang 2015<br>
		made with the <a href="http://rxa.li/documenter">Documenter v2.0</a> 
		</div>
	</div>
	<div id="documenter_content">
	<section id="documenter_cover">
	<h1>Karenderia Mobile App</h1>
	
	<div id="documenter_buttons">
		
	</div>
	<hr>
	<ul>
	<li>created: 11/23/2015</li>
	
	<li>by: bastikikang</li>
	<li><a href=""></a></li>
	<li>email: <a href="mailto:&#98;&#97;&#115;&#116;&#105;&#64;&#99;&#111;&#100;&#101;&#109;&#121;&#119;&#101;&#98;&#97;&#112;&#112;&#115;&#46;&#99;&#111;&#109;">&#98;&#97;&#115;&#116;&#105;&#64;&#99;&#111;&#100;&#101;&#109;&#121;&#119;&#101;&#98;&#97;&#112;&#112;&#115;&#46;&#99;&#111;&#109;</a></li>
	</ul>
	<p>Karenderia Mobile App is ordering application for <a target="_blank" href="http://codecanyon.net/item/karenderia-multiple-restaurant-system/9118694">Karenderia Multiple Restaurant System</a>
	
	</p>
	</section>
	
	<section id="features">
	<div class="page-header"><h3>Features</h3><hr class="notop"></div>
<p><strong>Online Easy Ordering</strong></p>
<ul>
	<li>Easy to search for restaurant</li>
	<li>Filter restaurant by cuisine or by services</li>
	<li>Auto detects location address</li>
	<li>Multiple addons for food item</li>
	<li>Multiple size and price for food item</li>
	<li>Ingredients selections for food item</li>
	<li>Cooking reference</li>
	<li>Real time order status</li>
	<li>Easy to re-order previous ordered food item</li>
</ul>
<p><strong>Payment Gateway</strong></p>
<ul>
<li>Cash on delivery</li>
<li>Paypal</li>
<li>Pay using credit cards on debit cards</li>
</ul>

<p><strong>Book a table</strong></p>
<ul>
<li>Easy booking table</li>
<li>Receive updates on your booking status</li>
</ul>

<p><strong>Restaurant Review</strong></p>
<ul>
<li>Add your own reviews to a restaurant</li>
</ul>

<p><strong>Android Push Notification</strong></p>
<ul>
<li>Customer can receive push notification about the status of their order</li>
</ul>

</section>
<section id="live_demo">
	<div class="page-header"><h3>Live Demo</h3><hr class="notop"></div>
<p>
	See the Karenderia mobile app in action?</p>
<p>
Download android APK File <a href="https://www.dropbox.com/s/hoqe7aqwjwk1ugl/Karenderia%20Mobile%20App%201.3.2.apk?dl=1" target="_blank">click here</a>
</p>
<p>Watch Karenderia mobile app in action <a href="https://youtu.be/2bXgU5s0XWk" target="_blank">click here</a></p>

</section>
<section id="installation">
	<div class="page-header"><h3>Installation</h3><hr class="notop"></div>
<p>First you need to install the mobile app modules on your karenderia multiple restaurant system these will include the mobile api engine and mobile app settings.
</p>	
<p>	1. create a folder called <strong>modules</strong> on protected folder</p></p>
<p>
	2.&nbsp; copy the folder <b>modules/mobileapp</b> to <b>protected/modules</b>  (mobileapp is the file where you download from Codecanyon)
	</p>
<img src="assets/images/image_1.jpg">

<p>3. open the file <b>/protected/config/main.php</b>
and add the following code after the line 'language'=>'default',	
<pre>
	'modules'=>array(		
		'mobileapp'=>array(
		  'require_login'=>true
		)
	),
</pre>
Where require_login = true this means you need to login to admin panel before you can use see the Mobile app settings<br/>
if you don't want to use it without login to admin then set the value to false
</p>
<p>it should be like the screenshot below</p>
<img src="assets/images/image_2.jpg" >

<p>4. Now add the Mobile app modules on admin menu,
open the file /protected/components/functions.php and look for functions adminMenu()
</p>
<p>add the line below after the menu SEO</p>
<pre>
  /**add ons */
array('visible'=>$this->AA('addons'),'tag'=>'addons',
'label'=>'<i class="fa fa-plus-circle"></i>'.Yii::t("default",'Add-ons'),
   'itemOptions'=>array('class'=>''), 'items'=>array(                   
   
   array('visible'=>$this->AA('addonexport'),
   'tag'=>'addonexport','label'=>'<i class="fa fa-paypal"></i>'.Yii::t("default","Export/Import"), 
   'url'=>Yii::app()->getBaseUrl(true)."/ExportManager"),                
   
   array('visible'=>$this->AA('mobileapp'),
   'tag'=>'mobileapp','label'=>'<i class="fa fa-paypal"></i>'.Yii::t("default","MobileApp"), 
   'url'=>Yii::app()->getBaseUrl(true)."/mobileapp"),                

 )),  
/**add ons */
</pre>
<p>see screenshot below</p>
<img src="assets/images/image_3.jpg" style="max-width:700px;">

<p>5. To see the mobile app settings,<br>
Login to admin panel edit your account (admin-> User list)<br>
under the User Access tick the Add-ons  and MobileApp  an save your account then logout and relogin again
to see the addon menu<br><br>
</p>
<img src="assets/images/image_4.jpg" style="max-width:700px;">

<p>
After you have re-login you should see now the Mobile app settings section<br>
see screenshot below
</p>
<img src="assets/images/image_6.jpg" style="max-width:700px;">

<p>Another options to access the Mobile App modules just simple type the address on your browser<br>
http://localhost/mobileapp/ if you install the kmrs on folder restomulti then the address is http://localhost/restomulti/mobileapp/<br/>
see screenshot below
</p>
<img src="assets/images/image_5.jpg" style="max-width:700px;">


<p>
6. Add Paypal Mobile app settings on your current admin & merchant paypal settings  <br/>
(note: if your version of kmrs is 2.7 and up you will not have to do this steps is already added on the backend)
<ul>
 <li>a. open the file <strong>protected/views/admin/paypal-settings.php</strong><br/>
 add the following code (<a href="assets/admin-paypal.txt" target="_blank">click here</a>) after line 140 or after the live Paypal Signature 
 </li>
 
 <li>b.
 open the file <strong>protected/views/merchant/paypal-settings.php</strong>
 add the following code (<a href="assets/merchant-paypal.txt" target="_blank">click here</a>) after line 128 or after the live Paypal Signature 
 </li>
 
 <li>
 c.
 add action to save the paypal settings for admin and merchant<br/>
 open the file <strong>protected/components/AjaxAdmin.php</strong><br/><br/>
 for admin look for the functions <strong>saveAdminPaypalSettings()</strong><br/>
<pre>
Yii::app()->functions->updateOptionAdmin("adm_paypal_mobile_enabled",
isset($this->data['adm_paypal_mobile_enabled'])?$this->data['adm_paypal_mobile_enabled']:'');

Yii::app()->functions->updateOptionAdmin("adm_paypal_mobile_mode",
isset($this->data['adm_paypal_mobile_mode'])?$this->data['adm_paypal_mobile_mode']:'');

Yii::app()->functions->updateOptionAdmin("adm_paypal_mobile_clientid",
isset($this->data['adm_paypal_mobile_clientid'])?$this->data['adm_paypal_mobile_clientid']:'');
 </pre>
 
  for merchant look for the functions <strong>savePaypalSettings()</strong><br/>
 <pre>
 
Yii::app()->functions->updateOption("mt_paypal_mobile_enabled",
isset($this->data['mt_paypal_mobile_enabled'])?$this->data['mt_paypal_mobile_enabled']:'',$merchant_id);

Yii::app()->functions->updateOption("mt_paypal_mobile_mode",
isset($this->data['mt_paypal_mobile_mode'])?$this->data['mt_paypal_mobile_mode']:'',$merchant_id);

Yii::app()->functions->updateOption("mt_paypal_mobile_clientid",
isset($this->data['mt_paypal_mobile_clientid'])?$this->data['mt_paypal_mobile_clientid']:'',$merchant_id);
 </pre>
  
 </li>
 
</ul>
</p>


<p>You should see this settings by now on admin -> payment gateway -> paypal and merchant -> paypal settings</p>
<img src="assets/images/image_24.jpg" style="max-width:700px;">

<p>
7.  add the hook for sending push notification when the merchant change the order status<br/>
open the file /protected/ajaxadmin.php and look for the functions <strong>updateOrder()</strong><br>
on line 3254 add the following lines after the line $DbExt->insertData("{{order_history}}",$params_history);
<pre>
/** Mobile save logs for push notification */
Yii::app()->setImport(array(			
  'application.modules.mobileapp.components.*',
));
AddonMobileApp::savedOrderPushNotification($this->data);				    		    				
</pre>

<br/>see below screenshot:
</p>
<img src="assets/images/image_25.jpg" style="max-width:600px;">

<p>8. Update your database with the new table and fields required to run the mobile app,
go to mobile app modules just click on the <strong>update db tables </strong> menu
</p>

<p>9. Set the push notification cron jobs to receive push notification on your mobile,<br/>
 you will need to set the cron jobs on your<br/>
server cpanel as http cronjobs
you can find the cron job links on your mobile app modules <strong>Push cronjobs</strong> menu. <br/>
eg. linux command <strong>CURL http://yourserver.com/mobileapp/cron/processpush</strong>

</p>

</section>


<section id="phonegapbuild">
   <div class="page-header"><h3>Build your app using phonegap build</h3><hr class="notop"></div>
   <p>To build or compile your mobile app you need to have account on <strong>http://build.phonegap.com</strong>
   <a href="https://build.phonegap.com/people/sign_up" target="_blank">click here</a> to signup 
   then choose the free package
   </p> 
   
<p>1. 
Set your mobile app settings,
open the file www/js/config.js and change the value according to your settings</p>  
<pre>
var krms_config ={	
	'ApiUrl':"YOUR_API_URL",
	'DialogDefaultTitle':"YOUR_OWN_DIALOG_TITLE",
	'pushNotificationSenderid':"YOUR_ANDROID_PUSH_PROJECT_ID",
	'facebookAppId':"YOUR_FACEBOOK_APP_ID",
	'APIHasKey' : "YOUR API HASH KEY (OPTIONAL)"
};
</pre>

<strong>Where</strong>:<br/>
<p><strong>ApiUrl</strong> = the link of your api <strong>[this is mandatory]</strong>
<br/>
you can find your mobile api link on your mobile app settings under general settings.<br/>
usually the link will be like this <strong>http://yourserver.com/mobileapp/api</strong>
</p>

<p><strong>DialogDefaultTitle</strong> = this is the dialog title that will appear on your mobile app eg. MyStore</p>

<p><strong>pushNotificationSenderid</strong> = this is your google android push notification project id <strong>[this is mandatory]</strong>
<br/>
go to sections <a href="#googleproject">How to create google android project</a> on how to get your push sender id
</p>

<p><strong>facebookAppId</strong> = this is your facebook app id <strong>[this is optional]</strong><br/>
if this is empty the facebook login will not be available on your mobile app.<br/>
you can go to sections <a href="#facebooklogin">How to setup your facebook login</a>
</p>

<p>
<strong>APIHasKey</strong> = api hash key is optional this features make your api secure so that 
no one can connect to your api. Make sure your api hash key is the same as on key on your modules settings.
</p>

<p><br/>see below config.js screenshot:</p>


<img src="assets/images/image_7.jpg" style="max-width:500px;">

<p>2. Change the app name, app description and author. open the file <strong>www/config.xml</strong>
<ul>
 <li>a. change the name to your own app name</li>
 <li>b. change the author email and auhor name</li>
 <li>c. change the app description to your own</li>
 <li>d. change the app id to your own eg. kmrs.mobile.app to yourown.app</li>
</ul>
</p>
<p>see below screenshot:</p>
<img src="assets/images/image_8.jpg" style="max-width:500px;">


<p>3. Zip the required mobile files go to the folder kmrsmobile and select all the files and add to zip.<br/>
note: the zip files should contain the following files www folder, icon.png, splash.png and  config.xml
<br> you will need to install <a href="http://www.winzip.com/win/en/index.htm"><strong>Winzip</strong></a> to zip the files
or <a href="http://www.win-rar.com/start.html?&L=0">Winrar</a>
</p>
<p>by now you should have the file as zip format see below screenshot:</p>

<p style="color:#FF0000;">Important : when you zip the file make sure you are inside the folder kmrsmobile  don't zip the whole folder kmrsmobile it will not work</p>
<img src="assets/images/image_9.jpg" style="max-width:500px;">
   
   
<p>
4. Login to your <strong>https://build.phonegap</strong> account then go to App menu on top
or follow this link <strong>https://build.phonegap.com/apps</strong>
</p>

<p>
5. Click on Upload a .zip file or Update Code 
see below screenshot:
</p>
<img src="assets/images/image_10.jpg" style="max-width:600px;"><br/>
<img src="assets/images/image_11.jpg" style="max-width:600px;">


<p>
6. Download your mobile app APK File <br/>
the APK file is the installer file for your android mobile phone
you can transfer this to your mobile phone via bluetooth or wifi connections<br/>
see below screenshot
</p>
<img src="assets/images/image_12.jpg" style="max-width:600px;">
   
<p>7. Finish :) Congratulation your all done </p>

<p>
<strong>NOTE: </strong>
if you want to publish your app on google play you will need a private key <br/>
see Android signing tutorial for phonegap build
<a href="http://docs.build.phonegap.com/en_US/signing_signing-android.md.html" target="_blank">http://docs.build.phonegap.com/en_US/signing_signing-android.md.html</a>
</p>
   
</section>



<section id="googleproject">
   <div class="page-header"><h3>How to create google android project</h3><hr class="notop"></div>
<p>This section is quick guide on how to obtain your <strong>pushNotificationSenderid</strong> and <strong>Android Push API Key</strong></p>   

<p>1. login to your google developer account <strong>https://console.developers.google.com/home</strong></p>

<p>2. Create a new project give it a project name.
<br/>see below screenshot:
</p>
<img src="assets/images/image_13.jpg" style="max-width:600px;">
<p>after you have created a project you will be redirected to dashboard.<br/>
now you will see your pushNotificationSenderid eg. 157XXXXXXX41
Project number
<br/>see below screenshot:
</p>
<img src="assets/images/image_15.jpg" style="max-width:600px;">

<p>3. Now enabled the API Google Cloud Messaging for android
<br/>see below screenshot:
</p>
<img src="assets/images/image_16.jpg" style="max-width:600px;">

<p>4. Generate Android Push API Key go to api manager -> credentials -> add credentials -> API Key -> choose Android key<br/>
After you have created api key you will be presented with the api key this key you will have to set this on your mobile app settings
under general settings
</p>
<img src="assets/images/image_17.jpg" style="max-width:600px;">

<p>5. Finish :)</p>

<p>
Version 1.3.4 <br/>
for the map to work
enabled the following api in your google project<br/>

<strong>Google Maps Android API</strong> <br/>
<strong>Google Maps SDK for iOS</strong> <br/>
</p>

<p>
set your api key in your config.xml
<strong>API_KEY_FOR_ANDROID</strong> and <strong>API_KEY_FOR_IOS</strong>
</p>

<p style="color:red;">
FOR PUSH NOTIFICATION <br/>
google have changed something new , <br/>
you will need to create your api key on these link<br/>
<a href="https://developers.google.com/mobile/add">https://developers.google.com/mobile/add</a> used with same project id . <br/>
and create new api key through here. <br/>
</p>

</section>

<section id="facebooklogin">
	<div class="page-header"><h3>How to setup your facebook login</h3><hr class="notop"></div>
<p>This section will quick guide you on how to setup your facebook login on your mobile app</p>	

<p style="color:red;">NOTE: your facebook api version should be v2.5</p>

<p>1. login to your facebook developer account https://developers.facebook.com/</p>

<p>2. Create a new app -> choose website</p>

<p>3. after you create new app you will be redirected to dashboard and you will see your app id
<br/>see below screenshot:
</p>
<img src="assets/images/image_18.jpg" style="max-width:600px;">

<p>4. Go to settings under basic set your website address https://localhost/www/ 
and make sure you put a correct email address on contact email fields
<br/>see below screenshot:
</p>
<img src="assets/images/image_19.jpg" style="max-width:600px;">

<p>5. Go to Advanced tab and make sure the <strong>Embedded Browser OAuth Login</strong> is enabled<br/>
and add the following Valid OAuth redirect URIs 
<strong>https://www.facebook.com/connect/login_success.html</strong>
and<br/>
<strong>http://localhost/kmrsmobile/www/oauthcallback.html</strong> (this link is optional and will depends in your local development path)
<br/>see below screenshot:
</p>
<img src="assets/images/image_20.jpg" style="max-width:600px;">

<p>6. Go to Staus & Review make sure the app is set to public
<br/>see below screenshot:
</p>
<img src="assets/images/image_21.jpg" style="max-width:600px;">

</section>


<section id="paypal">
	<div class="page-header"><h3>How to setup your paypal</h3><hr class="notop"></div>
	<p>This section is a quick quide on how to obtain your paypal client id</p>
	
<p>1. login to your paypal developer account <a href="https://developer.paypal.com/" target="_blank">https://developer.paypal.com/</a></p>

<p>2. go to dashboard -> My Apps & Credentials -> create app
<br/>see below screenshot:
</p>
<img src="assets/images/image_22.jpg" style="max-width:600px;">

<P>3. after you have created a new app you will now able to see your client id.
<br/>to get the live client id just click on the live button on the top right corner
<br/>see below screenshot:
</P>
<img src="assets/images/image_23.jpg" style="max-width:600px;">
	
<P>4. Set the client id on your mobile app settings under general settings
<br/>see below screenshot:
</P>
<img src="assets/images/image_24.jpg" style="max-width:600px;">

<p>5. Finish :)</p>
	
</section>


<section id="how_to_translate">
	<div class="page-header"><h3>How to translate the app</h3><hr class="notop"></div>
	
	<p>
	1. to translate the backend copy the file <b>modules/mobileapp/translation-file/mobile.php</b> <br/>
	to folder <b>protected/messages/en</b> <br/>
	example if you want to translate to <b>japanese</b> create a folder like <b>protected/messages/jp</b> <br/>
	and copy the file <b>modules/mobileapp/translation-file/mobile.php</b> to <b>/jp</b> folder<br/>
	and from there translate all the words found in mobile.php<br/>
	</p>
	
	<p>
	2. to translate mobile app files just copy the files <b>modules/mobileapp/translation-file/mobileapp.php</b><br/>
	to the messages folder <b>protected/messages/en</b> and from there translate all the words found in <b>mobileapp.php</b><br/>
	</p>
	
</section>


<section id="how_to_change_notification_tone">
   <div class="page-header"><h3>How to change notification ringtone</h3><hr class="notop"></div>
   
   <p>To change the push notification ringtone for android, just follow the simple steps below</p>
   
   <ol>
    <li>copy your ringtone files (mp3, wav) to the folder <strong>www/locales/android/raw</strong> (note: this is the mobile app files)<br/><br/></li>
	<li>open the file <strong>protected/controllers/CronController.php</strong> <br/>
	and look for the words <strong>food_song</strong> and replace it with your new ringtone filename don't include the extension such as .mp3
	<br/>
   eg. your ring tone filename = <strong>test.mp3</strong> then you will put <strong>test</strong> only
   <pre>
   'soundname'=>'test'
   </pre>
	</li>
	
	<li>
	change or replace the mp3 files on <b>www/audio/fb-alert.mp3</b>
	</li>
   </ol>
   
   
   <p><strong>Note:</strong> to remove the ringtone and just assign the default tone of the device just remove the <strong>soundname</strong> parameters
   from <strong>CronController.php</strong> files</p>
   
</section>

<!--<section id="razor_pay">
   <div class="page-header"><h3>Update KMRS with Razorpay payment</h3><hr class="notop"></div>
   
   <p style="color:red;">Skip this if your kmrs version is 3.4 above</p>
   
   <p>To update your kms backend with <strong>Razorypay</strong> payment gateway please follow the steps below</p>
   
<ol>
  <li>
  Open the file <strong>components/functionsv3.php</strong> and look for the functions <strong>PaymentOptionList()</strong> <br/>
  add razor pay in the array
  <pre>
  return array(
    	  'cod'=>t("Cash On delivery"),
    	  'ocr'=>t("Offline Credit Card Payment"),
    	  'pyr'=>t("Pay On Delivery"),
    	  'pyp'=>t("paypal"),
    	  'stp'=>t("stripe"),
    	  'mcd'=>t("mercapado"),
    	  'ide'=>t("sisow"),
    	  'payu'=>t("payumoney"),
    	  'pys'=>t("paysera"),    	  
    	  'bcy'=>t("Barclay"),
    	  'epy'=>t("EpayBg"),
    	  'atz'=>t("Authorize.net"),
    	  'obd'=>t("Offline Bank Deposit"),
    	  'btr' =>t("Braintree"),
    	  <strong>'rzr'=>t("Razorpay")</strong>
    	);
  </pre>  
  </li>
  <li>Open the file components/functions.php and look for the functions <strong>adminMenu()</strong> <br/>
   after the line 
   <pre>
   array('visible'=>$this->AA('braintree'),'tag'=>'braintree',
   'label'=>'<i class="fa fa-paypal"></i>'.Yii::t("default","Braintree"), 
   'url'=>array('admin/braintree')),                             
   </pre>
   
   add razor pay
   <pre>
   array('visible'=>$this->AA('razor'),'tag'=>'razor',
   'label'=>'<i class="fa fa-paypal"></i>'.Yii::t("default","Razorpay"), 
   'url'=>array('admin/razor')),                             
   </pre>
   
  </li>
  
  <li>components/functions.php look for the functions <strong>merchantMenu()</strong><br/>
  after the Braintree
  
  add the code
  <pre>
	array('visible'=>$this->hasMerchantAccess("rzr"),'tag'=>'rzr', 'label'=>'<i class="fa fa-paypal"></i>'.Yii::t("default","Razorpay"), 
	'url'=>array('merchant/razor')),                                                            
  </pre>
  </li>
  
  <li>Open the file <strong>controller/AdminController.php</strong>  <br/>
  after the functions <strong>actionBraintree() </strong>
  add the functions for razor pay
  
  <pre>
    public function actionRazor()
	{
		$this->render('razor');
	}
  </pre>
  
  </li>
  
 <li>Open the file <strong>controller/MerchantController.php </strong> <br/>
  after the functions <strong>actionBrainTreeSettings() </strong>
  add the functions for razor pay
  
  <pre>
    public function actionRazor()
	{
		$this->render('razor');
	}
  </pre>
  
  </li>
  
  <li>Open the file <strong>components/Ajax.php </strong> after the functions <strong>merchantBrainTreeSettings()</strong><br/>
  add the code below
  
  <pre>
      public function adminRazorSettings()
    {
    	Yii::app()->functions->updateOptionAdmin("admin_razor_key_id_sanbox",
	    isset($this->data['admin_razor_key_id_sanbox'])?$this->data['admin_razor_key_id_sanbox']:'');
	    
	    Yii::app()->functions->updateOptionAdmin("admin_razor_secret_key_sanbox",
	    isset($this->data['admin_razor_secret_key_sanbox'])?$this->data['admin_razor_secret_key_sanbox']:'');
	    
	    Yii::app()->functions->updateOptionAdmin("admin_razor_key_id_live",
	    isset($this->data['admin_razor_key_id_live'])?$this->data['admin_razor_key_id_live']:'');
	    
	    Yii::app()->functions->updateOptionAdmin("admin_razor_secret_key_live",
	    isset($this->data['admin_razor_secret_key_live'])?$this->data['admin_razor_secret_key_live']:'');
	    
	    Yii::app()->functions->updateOptionAdmin("admin_rzr_enabled",
	    isset($this->data['admin_rzr_enabled'])?$this->data['admin_rzr_enabled']:'');
	    
	    Yii::app()->functions->updateOptionAdmin("admin_rzr_mode",
	    isset($this->data['admin_rzr_mode'])?$this->data['admin_rzr_mode']:'');
	    
	    $this->code=1;
		$this->msg=Yii::t("default","Settings saved.");
    }    
    
    public function merchantRazorSettings()
    {
    	Yii::app()->functions->updateOptionAdmin("merchant_rzr_mode",
	    isset($this->data['merchant_rzr_mode'])?$this->data['merchant_rzr_mode']:'');
	    
	    Yii::app()->functions->updateOptionAdmin("merchant_rzr_enabled",
	    isset($this->data['merchant_rzr_enabled'])?$this->data['merchant_rzr_enabled']:'');
	    
	    Yii::app()->functions->updateOptionAdmin("merchant_razor_key_id_sanbox",
	    isset($this->data['merchant_razor_key_id_sanbox'])?$this->data['merchant_razor_key_id_sanbox']:'');
	    
	    Yii::app()->functions->updateOptionAdmin("merchant_razor_secret_key_sanbox",
	    isset($this->data['merchant_razor_secret_key_sanbox'])?$this->data['merchant_razor_secret_key_sanbox']:'');
	    
	    Yii::app()->functions->updateOptionAdmin("merchant_razor_key_id_live",
	    isset($this->data['merchant_razor_key_id_live'])?$this->data['merchant_razor_key_id_live']:'');
	    
	    Yii::app()->functions->updateOptionAdmin("merchant_razor_secret_key_live",
	    isset($this->data['merchant_razor_secret_key_live'])?$this->data['merchant_razor_secret_key_live']:'');
	    
	    $this->code=1;
		$this->msg=Yii::t("default","Settings saved.");
    }        

  </pre>
  </li>
  
  <li style="margin-bottom:10px;">Copy the file <strong>Karenderia Mobile App/razorpay/admin/razor.php</strong> (this file can be found on the zip file you download from codecanyon) <br/>
  to <strong>protected/views/admin</strong><br/>
  </li>
  
  <li style="margin-bottom:10px;">Copy the file <strong>Karenderia Mobile App/razorpay/merchant/razor.php</strong> <br/>
  to <strong>protected/views/merchant</strong><br/>
  </li>
  
  <li>To see the Razorpay on the admin panel menu edit your admin account and tick the access to <strong>Razorypay</strong><br/>
  the relogin again to see the menu
  </li>
    
</ol>   
</section>-->

<section id="frequently_asked_questions">
	<div class="page-header"><h3>Frequently Asked Questions</h3><hr class="notop"></div>
<p>
	<strong>What version of KMRS this modules will run?</strong><br/>
- Mobile App modules will run on version 2.4 and up,
<br/>
if you are using old version contact me <a  target="_blank" href="http://codecanyon.net/item/karenderia-multiple-restaurant-system/9118694/support">here </a>
</p>


<p><strong>I upload the folder mobileapp to modules folder but blank screen in admin backend mobile app</strong>
<br/>
- try to set the folder assets to 0777 permission (assets folder is the assets folder of kmrs)
</p>


<p><strong>How to change the mobile app logo on home section of the app?</strong>
<br/>
- just replace the following files on <strong>www/css/images/banner.png</strong> (take note of the width and height of the image)
</p>

<p><strong>How to change the default logo for merchant and food item?</strong>
<br/>
- go to mobile app modules on general settings -> Default Image upload your own logo
</p>

<p><strong>How to change the orange header background color on home section of the app?</strong>
<br/>
- open the file www/css/app.css look for the css <strong>.orange-header</strong> under that change the background properties
background:#f75d34;
</p>


<p><strong>How to change the app icon and splash screen</strong>
<br/>
- replace the following files <strong>kmrsmobile/icon.png</strong> and <strong>kmrsmobile/splash.png</strong><br/>
for the icon/splash screen make sure the it has a valid size according to different device<br/>
see this link for more information <a target="_blank" href="http://docs.build.phonegap.com/en_US/configuring_icons_and_splash.md.html">http://docs.build.phonegap.com/en_US/configuring_icons_and_splash.md.html</a>
</p>


<p><strong>After compile hydration appears</strong>
<br/>
You will need to disabled the phonegap Hydration<br/>
After logging in navigate to the apps page, and select your app by clicking its title or icon. On the app's detail page, open the "Settings" panel. Under the "Basic" header de-select the checkbox labeled "enable hydration", and finally hit save.

You've now successfully disabled Hydration.
</p>

<p><strong>After compile and upload to build.phonegap the app does not connect to API</strong>
<br/>
if you upload the zip file on build.phonegap the icon does not show or the app does not load,
reason is maybe you zip the whole folder kmrsmobile this is not correct make sure you are inside the folder kmrsmobile
and select all the files and add to zip
</p>

<p><strong>Installing the app return errors package is not valid</strong>
<br/>
maybe you put some special charaters on config.xml ,
xml does not like special charaters like <strong>?</strong> and <strong>, </strong>
</p>

<p><strong>How to submit my app to apple store?</strong>
<br/>
<a href="http://wiki.nsbasic.com/Submitting_to_the_iOS_App_Store">http://wiki.nsbasic.com/Submitting_to_the_iOS_App_Store</a>
<br/>

<p><strong>Timeout when getting location in android 6.0</strong>
<br/>
Afetr you install the app and getting timeout when getting your current location
restart your device and try again
<br/>

<p><strong>Error parsing package</strong>
<br/>
This is issue in android version 4.0 
cause the paypal plugin will not work in lower version for android <br/>
you can run fixed it by modifying the config.xml <br/>
remove this line  <br/>
<pre>
< gap:plugin name="com.paypal.cordova.mobilesdk" source="npm"  / >
</pre>
and
<pre>
< preference name="android-minSdkVersion" value="16" / >    
</pre>

<br/>

</p>


</section>
<section id="changelog">
	<div class="page-header"><h3>Changelog</h3><hr class="notop"></div>
	
	<p style="color:red;">
	Important: when there is new update please run the update DB Tables.<br/>
	simple by going to mobileapp modules backend and click on Update Db Tables
	</p>

<p>= 2.0 (25 June 17) =</p>
<ul>
  <li>fixed - search to wildcard conditions</li>
  <li>fixed - category name stripslashes</li>  
  <li>fixed - distance unit not clearing old distance unin in search results</li>
  <li>fixed - re-order not working if save cart to database is on</li>   
  <li>fixed - can re-order if the merchant close store is enabled</li>
  <li>fixed - cannot re-order if merchant disabled ordering</li>  
  <li>fixed - re-order should not work if merchant status is not active</li>
  <li>fixed - cannot re-order if order is place in web show error message</li>   
  <li>fixed - customer can re-order even if merchant disabled ordering</li>
  <li>fixed - remove changes address if transaction type is pickup/dinein in cart page</li>  
  <li>fixed - browse restaurant search by restaurant name use wildcard query</li>
  <li>fixed - browse and search page to display service type and payment options</li>   
  <li>fixed - filter by services</li>
  <li>fixed - transaction type not null when first load of cart</li>  
  <li>fixed - remove change address here if transaction is pickup/dinein</li>
  <li>fixed - tips</li>   
  <li>fixed - 2 flavor not adding addon items</li>
  <li>fixed - increase +and- button icon</li>  
  <li>fixed - offline bank deposit instructions</li>
  <li>fixed - fax not sending</li>           
  <li>fixed - can re-order if merchant is not published</li>
  <li>fixed - booking table not saving client_id</li>  
  <li>new - use new templating functions</li>
  <li>new - add loading page before the app goes to main menu</li>
  <li>new - add force Default Language in mobileapp backend settings</li>  
  <li>new - use new translation method in mobileapp and backend</li>
  <li>new - add new options for Get Current location results</li>
  <li>new - add software version in page settings</li>  
</ul>  

<p>= 1.3.6 (28 October 16) =</p>
<ul>
  <li>fixed math functions for 2 flavors</li>
  <li>fixed plugin outdated in config.xml</li>  
  <li>fixed edit cart not working</li>
  <li>fixed error message no connection to toast instead of alert</li>  
  <li>fixed - address fields not translating</li>
  <li>fixed - slashes in merchant name</li>  
  <li>fixed - disabled ordering from admin settings</li>
  <li>fixed - choosing address from map which firing api calls twice</li>  
  <li>fixed - default delivery address</li>
  <li>fixed - distance unit when address is very close</li>  
  <li>fixed - get location in android 6.0</li>
  <li>new - add new plugin diagnostic</li>  
  <li>new - add tips</li>
  <li>new - add offline bank deposit payment</li>              
  <li>new - add offline credit card</li>              
  <li>new - add event listener for connection lost</li> 
</ul>

<p>= 1.3.5 (10 October 16) =</p>
<ul>
  <li>new - add new menu which display only food name and price</li>
  <li>new - add options to choose between saving the cart on db or in device</li>
  <li>new - add auto refresh on track order page and map</li>
  <li>change - change the 3 dots to new icon for category</li>
  <li>fixed - delivery address street number is missing</li>
  <li>fixed - map marker to use the lat and long when choosing address from map</li>        
  <li>fixed - backslashes in category name and restaurant name</li>
  <li>fixed - open, close and pre order tag on search results and browse resto</li>        
  <li>fixed - 2 flavor</li>
  <li>fixed - delivery fee showing as false</li>            
</ul>  

<p>= 1.3.4 (26 september 16) =</p>
<ul>
  <li>fixed - table mobile_registered not updating correctly</li>
  <li>fixed - search sorting</li>
  <li>fixed - open and pre order tag</li>
  <li>fixed - decimal place if set to zero format is not working</li>
  <li>fixed - default address not saving</li>
  <li>fixed - menu</li>
  <li>fixed - category name does not translate</li>
  <li>fixed - remove cash on delivery available if turn off by admin </li>
  <li>fixed - paypal payment not processable error</li>
  <li>fixed - pay delivery merchant membership payment list</li>
  <li>fixed - delivery fee on search results</li>
  <li>fixed - earn points not adding when creating account</li>
  <li>fixed - earn points by review</li>
  <li>fixed - earn points on first order</li>
  <li>fixed - IOS badge not being clear</li>
  <li>fixed - change rating text field to stars</li>
  <li>fixed - book a table mobile phone to have country code prefix</li>
  <li>new - change plugin for enabling gps</li>
  <li>new - update font awesome to 4.6.3 </li>
  <li>new - add distance,delivery distance and delivery estimation in search results</li>
  <li>new - add razorpay payment provider</li>
  <li>new - saved the cart on database instead on device</li>
  <li>new - change loader </li>
  <li>new - add easy access for category</li>
  <li>new - add filter by restaurant name in search result page</li>
  <li>new - add pop over menu on restaurant page</li>
  <li>new - add new page for map with map directions</li>
  <li>new - add custom fields customer signup</li>
  <li>new - add terms & condition on customer signup</li>
  <li>new - add mobile auto country code prefix</li>
  <li>new - driver app auto insert task</li>
  <li>new - add customer verification page</li>
  <li>new - allow the customer to see the menu even if merchant is closed</li>
  <li>new - voucher can not be applied if the merchant has an offer to avoid double discount</li>
  <li>new - add deliver asap checkbox button</li>
  <li>new - add track your order </li>
  <li>new - add enter contact number if customer contact number is empty during checkout pickup transaction</li>
  <li>new - add push sound to notification</li>
</ul>  
  
<p>= 1.3.3 (23 April 16) =</p>
<ul>
  <li>fixed - description of food item removing html tags</li>
  <li>fixed - geocoding address</li>
  <li>fixed - pre order condition</li>
  <li>fixed - push notification not saving correct sender id if merchant change the order status</li>
  <li>fixed - if merchant has only pickup services</li>
  <li>fixed - default order status</li>
  <li>fixed - paypal not showing on payment list</li>
  <li>fixed - voucher</li>
  <li>fixed - fb login with admin settings on/off</li>
  <li>fixed - cuisine translation</li>
  <li>fixed - minimum and maximum order delivery/pickup</li>
  <li>fixed - back button that exit the app</li>
  <li>fixed - voucher expiration on same day</li>
  <li>fixed - missing sender id when compiling the app</li>  
  <li>change - saving of translation functions</li>
  <li>change - getting of distance to new functions</li>
  <li>change - getting of delivery fee to new functions</li>
  <li>new - added stripe payment gateway</li>
  <li>new - added authorize.net payment gateway</li>  
  <li>new - add save address to address book during checkout</li>
  <li>new - auto add to cart if the food item has no addon</li>
  <li>new - add click functions on ratings stars</li>
  <li>new - add sms and email verification during signup</li>  
  <li>new - add loyalty points </li>  
  <li>new - add device id on settings</li>  
  <li>new - add api hash key to secure the mobile app api</li>  
  <li>new - check if gps is enabled</li>  
  <li>new - add device id on settings</li>  
  <li>new - add image loaded</li>  
  <li>new - add profile picture</li>  
</ul>

<p>= 1.3.2 (23 Feb 16) =</p>
<ul>
  <li>fixed order addon item and notes not inserting correctly on database</li>
  <li>fixed search results layout and browse restaurant</li>
  <li>fixed food item layout</li>
  <li>fixed pre-order status tag, it shows open even if the merchant has pre order</li>
  <li>fixed tax if food item is non taxable</li>
  <li>fixed food item non taxable not saving on database</li>
  <li>fixed notes not adding on merchant receipt panel as well as receipt</li>          
  <li>fixed formating of total price</li>
</ul>
	

<p>= 1.3.1 (18 Feb 16) =</p>
<ul>
  <li>add offers on search results and browse restaurant</li>
  <li>remove checking of net connection always set to true</li>
  <li>remove default set address "970 N Western Ave, Los Angeles, CA, United States"</li>
</ul>

<p>= 1.3 (16 Feb 16) =</p>
<ul>
 <li>fixed open,close and pre-order tag on search result and browse restaurant during translation</li>
 <li>fixed scroll issue on browse restaurant and search results page on lower android version</li>
 <li>fixed cannot back to previous page on receipt page</li>
 <li>fixed NaN value on cart when selecting item with no price</li>
 <li>fixed cannot select on sub item on different sub item category</li>
 <li>add contact number on profile</li>
 <li>auto fill contact number during checkout when selecting from address book</li>
</ul>

<p>= 1.2 (10 Dec 15) =</p>
<ul>
 <li>add translation features</li>
 <li>add push notification broadcast</li>
 <li>add IOS push notification</li>
 <li>add apply voucher</li>
 <li>fixed re-order item if the order was done on website</li>
</ul>


<p>= 1.1 (03 Dec 15) =</p>
<ul>
	<li>fixed price error if food item has no price </li>
	<li>fixed asking too much permission when installing on mobile device</li>
	<li>fixed creating view table</li>
	<li>fixed payment type not saving</li>
	<li>add sending of email to customer and merchant when there is new order</li>
	<li>add sending of sms notification to customer and merchant</li>
	<li>add options compile the app to ios and windows mobile</li>
	<li>fixed facebook login to work on facebook api v2.5</li>
	<li>add options if food item is not available</li>
	<li>add paypal card fee</li>
	<li>add new database table _mobile_temp_email</li>
</ul>	
	
<p>= 1.0 (28 Nov 15) =</p>
<ul>
	<li>Initial release version</li>
</ul>

</section>
<section id="sources_and_credits">
	<div class="page-header"><h3>Sources and Credits</h3><hr class="notop"></div>
<p>
Thanks so much to</p>
<ul>
<li><a href="http://onsen.io/" target="_blank">Onsen UI</a></li>
<li><a href="http://jquery.com/" target="_blank">Jquery</a></li>
<li><a href="http://www.yiiframework.com/" target="_blank">Yii Framework</a></li>
<li><a href="http://getbootstrap.com/" target="_blank">Boostrap 3</a></li>
<li><a href="http://harvesthq.github.io/chosen/" target="_blank">Chosen</a></li>
<li><a href="https://ubilabs.github.io/geocomplete/" target="_blank">Geocomplete</a></li>		
<li><a href="https://github.com/LPology/Simple-Ajax-Uploader" target="_blank">Simple Ajax Uploader</a></li>	
<li><a href="http://formvalidator.net/" target="_blank">Form validator</a></li>		
<li><a href="https://github.com/wbotelhos/raty" target="_blank">jQuery Raty</a></li>		
<li><a href="https://github.com/acidb/mobiscroll" target="_blank">Mobiscroll</a></li>		
<li><a href="https://github.com/ccoenraets/OpenFB" target="_blank">OpenFb</a></li>		
<li><a href="https://github.com/phonegap/phonegap-plugin-push" target="_blank">phonegap-plugin-push</a></li>		
<li><a href="https://github.com/paypal/PayPal-Cordova-Plugin/tree/170bf40f7213af462da18633f42f11ebb3905fe9" target="_blank">PayPal-Cordova-Plugin</a></li>		
</ul>
</section>
<section id="finally">
	<div class="page-header"><h3>Finally</h3><hr class="notop"></div>
<p>
	I spent a lot of time on this thing. Nevertheless it&#39;s still not finished. I like to improve it wherever I can and appreciate your feedback. I&#39;d be glad to help you if you have any questions relating to this mobile appp. No guarantees, but I&#39;ll do my best to assist.</p>
</section>

	</div>
</body>
</html>